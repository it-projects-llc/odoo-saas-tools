<openerp>
    <data noupdate="1">
        <record id="email_template_create_saas" model="email.template">
            <field name="name">Send new database credentials to the customer</field>
            <field name="email_from">${(object.user_id.email or '')|safe}</field>
            <field name="subject">Credentials:</field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="model_id" ref="saas_portal.model_saas_portal_client"/>
            <field name="auto_delete" eval="True"/>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html"><![CDATA[

            <p>Web:
            <a href="${object.public_url}">${object.public_url}</a>
            </p>

            ]]></field>
        </record>

        <record id="email_template_create_saass" model="email.template">
            <field name="name">Send new databases credentials to the customer</field>
            <field name="email_from">${(ctx["from_user"].email or '')|safe}</field>
            <field name="subject">Your ODOO ERP Application System is Ready</field>
            <field name="partner_to">${ctx["partner_to"]}</field>
            <field name="model_id" ref="product.model_product_template"/>
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[

            <p>
                Thank you for registering with us<br />
                Your new ODOO ERP application platform is ready!<br />
            </p>
            <p>
                % for plan in object.plan_ids:
                    % if plan.dbname_prefix:
                        <p>
                            We have created a testing environment in:<br />
                            % for dbname in ctx["dbnames"]:
                                % if dbname.startswith(plan.dbname_prefix):
                                    <em>${dbname}</em><br />
                                % endif
                            % endfor
                            You can enter with the email and password you registered on our page to start practicing.
                            Any transactions you make in the test environment, is only for testing so you can practice until you feel ready.
                        </p>

                        <p>
                            Once you are ready to start growing your business, you can enter your production environment at:<br />
                            % for dbname in ctx["dbnames"]:
                                % if not dbname.startswith(plan.dbname_prefix):
                                    <em>${dbname}</em><br />
                                % endif
                            % endfor
                            You can enter with the email and password that you registered on our page.
                        </p>
                    % endif
                % endfor
            </p>

            ]]></field>
        </record>

        <record id="email_template_expiration_datetime_updated" model="email.template">
            <field name="name">Send information about expiration date update to partner</field>
            <field name="email_from">${(object.user_id.email or '')|safe}</field>
            <field name="subject">Expiration updated</field>
            <field name="partner_to">${object.partner_id and object.partner_id.id or ''}</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="saas_portal.model_saas_portal_client"/>
            <field name="body_html"><![CDATA[

            <p>You expiration date is now: ${object.expiration_datetime}</p>
            <p>${format_tz(object.expiration_datetime, tz=object.partner_id.tz, context={'lang':object.partner_id.lang})}</p>
            ]]></field>
        </record>

        <record id="email_template_expiration_notify" model="email.template">
            <field name="name">Notify clients about oncoming expiration</field>
            <field name="email_from">${(object.user_id.email or '')|safe}</field>
            <field name="subject">Notification</field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="model_id" ref="saas_portal.model_saas_portal_client"/>
            <field name="auto_delete" eval="True"/>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html"><![CDATA[

            <p>
            Less than ${ctx["days"]} day(s) left before expiration.
            </p>

            ]]></field>
        </record>

        <record id="email_template_has_expired_notify" model="email.template">
            <field name="name">Notify clients about expired service</field>
            <field name="email_from">${(object.user_id.email or '')|safe}</field>
            <field name="subject">Notification</field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="model_id" ref="saas_portal.model_saas_portal_client"/>
            <field name="auto_delete" eval="True"/>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html"><![CDATA[

            <p>
            % if object.trial:
            Your trial service ${object.name} has expired
            % endif
            % if object.block_on_expiration:
            and blocked!
            % else:
            you have to pay in order to continue using the service!
            % endif
            </p>

            ]]></field>
        </record>

        <record id="email_template_storage_exceed" model="email.template">
            <field name="name">Notify clients about storage exceed</field>
            <field name="email_from">${(object.user_id.email or '')|safe}</field>
            <field name="subject">Notification</field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="model_id" ref="saas_portal.model_saas_portal_client"/>
            <field name="auto_delete" eval="True"/>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html"><![CDATA[

            <p>
            Storage limit ${object.total_storage_limit} of ${object.name} has been exceeded.
            Contact your system administrator in order to resume using your service.
            </p>

            ]]></field>
        </record>
    </data>
</openerp>
